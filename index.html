 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passwordo - Secure E-Commerce Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&family=Montserrat:wght@600&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        /* --- General and Existing CSS --- */
        body { font-family: 'Roboto', sans-serif; margin: 0; padding: 0; background: #000; color: #333; line-height: 1.6; }
        .lock-icon{ height: 40px; width: 40px; }
        header { background: #222831; color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        header h1 { font-family: 'Montserrat', sans-serif; margin: 0; }
        
        /* --- NEW: Menu Icon Styling --- */
        .menu-icon {
            font-size: 1.8em;
            cursor: pointer;
            transition: color 0.3s;
            padding: 5px 10px;
        }
        .menu-icon:hover {
            color: #28a745;
        }
        
        /* --- NEW: Side Navigation Panel --- */
        #sideNav {
            height: 100%;
            width: 0; /* Starts hidden */
            position: fixed;
            z-index: 3000; /* Above everything */
            top: 0;
            right: 0;
            background-color: #1e3a5f;
            overflow-x: hidden;
            transition: 0.5s; /* Smooth slide animation */
            padding-top: 60px;
            box-shadow: -5px 0 15px rgba(0,0,0,0.5);
        }

        #sideNav a {
            padding: 15px 25px 15px 35px;
            text-decoration: none;
            font-size: 20px;
            color: white;
            display: block;
            transition: 0.3s;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        #sideNav a:hover {
            color: #84b5e7;
            background-color: #28a745;
        }

        #sideNav .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
            color: white;
        }

        /* --- END NEW UI --- */

        .search-bar { display: flex; gap: 10px; margin: 20px 0; }
        .search-bar input { flex: 1; padding: 10px; border: 1px solid #ddd; border-radius: 5px; color: #000; }
        .search-bar select { padding: 10px; border: 1px solid #ddd; border-radius: 5px; color: #000; }
        .products { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; padding: 20px; max-width: 1200px; margin: 0 auto; }
        .product { background: #393E46; padding: 20px; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .product:hover { transform: translateY(-5px); }
        .product img { width: 100%; height: 200px; object-fit: cover; border-radius: 5px; }
        .product h3 { margin: 10px 0; font-family: 'Montserrat', sans-serif; color: white;}
        .product p { margin: 5px 0; color: white;}
        button { background: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-weight: 500; transition: background 0.2s; }
        button:hover { background: #218838; }
        .cart { position: fixed; top: 70px; right: 10px; background: white; padding: 15px; border: 1px solid #ddd; border-radius: 10px; width: 300px; max-height: 400px; overflow-y: auto; box-shadow: 0 4px 10px rgba(0,0,0,0.1); display: none; z-index: 2000; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }
        .cart-item button { padding: 5px 10px; font-size: 12px; }
        
        /* --- Popups and Backdrop --- */
        #popupBackdrop { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1500; display: none; }
        .popup-base, .login, .profile, .forgot, .admin { 
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); 
            background: white; padding: 30px; border: 1px solid #ddd; border-radius: 10px; 
            width: 400px; box-shadow: 0 8px 16px rgba(0,0,0,0.2); z-index: 2000; display: none; 
            text-align: center;
        }
        /* Make input fields readable inside white popups */
        .popup-base input, .login input, .profile input, .forgot input, .admin input, .admin textarea, .admin select {
            width: 90%; 
            padding: 10px; 
            margin: 8px 0; 
            border: 1px solid #ccc; 
            border-radius: 5px;
            color: #000; /* Ensure text is black/readable */
        }
        .popup-base h3, .login h2, .profile h2, .forgot h2, .admin h2 {
            color: #222831;
        }
        .popup-base p, .login p, .profile p, .forgot p {
            color: #444;
        }
        .error {
            color: red;
            font-weight: bold;
            margin-top: 10px;
        }

        /* --- Feedback Slider & Partners --- */

        .section-header { 
            max-width: 1200px; 
            margin: 40px auto 10px auto; 
            padding: 0 20px; 
            font-family: 'Montserrat', sans-serif;
            color: #ffffff;
        }
        
        .feedback-wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px 0;
            position: relative;
        }
        .feedback-container {
            width: 100%;
            overflow: hidden; 
            padding: 0 20px;
        }
        .feedback-list {
            display: flex;
            gap: 30px; 
            width: 2100px; 
            transform: translateX(0);
            transition: transform 0.5s ease-in-out; 
        }
        .feedback-card {
            min-height: 120px; /* Changed height to min-height for content flexibility */
            min-width: 300px; 
            padding: 25px;
            background: #1f1e14;
            border-radius: 20px ;
            box-shadow: 0 6px 15px rgba(79, 73, 73, 0.411);
            transition: all 0.3s ease-in-out;
            border-left: 2px solid #28a745;
        }
        .feedback-card:hover {
            box-shadow: 0 10px 20px rgba(174, 153, 153, 0.442);
            transform: translateY(-3px);
        }
        /* Adjust text color inside dark feedback cards */
        .feedback-card h4 { margin: 0 0 10px 0; color: #fff; font-weight: 600; }
        .feedback-card p { font-size: 15px; color: #ccc; margin-bottom: 5px; }
        .feedback-card .rating { color: gold; font-size: 1.2em; margin-bottom: 10px; }

        .slider-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(5, 5, 5, 0); 
            color: rgb(255, 255, 255);
            border: none;
            padding: 15px 10px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
            font-size: 1.2em;
            transition: background 0.3s, opacity 0.3s;
        }
        .slider-arrow:hover {
            background: #2c312d; 
        }
        #arrowLeft { left: 5px; }
        #arrowRight { right: 5px; }

        @keyframes slidePartners {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); } 
        }

        .partners-container {
            max-width: 1200px;
            margin: 20px auto 40px auto;
            padding: 20px 0;
            overflow: hidden; 
            background: #f0f0f02a;
            border-radius: 10px;
        }
        .partners-list-track {
            display: flex;
            width: 200%; 
            animation: slidePartners 60s linear infinite; 
        }
        .partner-logo {
            flex-shrink: 0; 
            width: 11.11%; 
            min-width: 120px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            font-size: 20px;
            color: #949aa4; /* Lightened partner logo text for dark background */
            opacity: 0.6;
            transition: opacity 0.3s;
            text-align: center;
            line-height: 50px;
            height: 50px;
            padding: 0 20px;
        }
        .partner-logo:hover {
            opacity: 1;
            color: #fff;
        }
        /* --- End Slider & Partners --- */

        /* --- FOOTER STYLES (Kept for consistency) --- */
        .custom-website-footer { background-color: #1e3a5f; color: #f0f0f0; padding: 40px 5% 20px 5%; font-family: 'Roboto', sans-serif; box-sizing: border-box; margin-top: 40px; }
        .footer-links-container { display: flex; justify-content: space-between; max-width: 1200px; margin: 0 auto 30px auto; border-bottom: 1px solid rgba(255, 255, 255, 0.2); padding-bottom: 30px; flex-wrap: wrap; }
        .footer-section { min-width: 180px; padding: 0 10px; }
        .footer-section h3 { font-size: 14px; font-weight: 600; text-transform: uppercase; margin-bottom: 15px; color: white; font-family: 'Montserrat', sans-serif; }
        .footer-section ul { list-style: none; padding: 0; margin: 0; }
        .footer-section ul li { margin-bottom: 8px; }
        .footer-section ul li a { color: #c0b0e9; text-decoration: none; font-size: 13px; transition: color 0.2s; }
        .footer-section ul li a:hover { color: white; }
        .social-icons a { color: white; font-size: 20px; margin-right: 15px; transition: opacity 0.2s; }
        .social-icons a:hover { opacity: 0.8; }
        .footer-bottom-bar { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: 0 auto; font-size: 13px; padding: 10px 0; }
        .footer-logo-info { display: flex; align-items: center; gap: 15px; }
        .footer-logo-info h1 { margin: 0; }
        .footer-logo-info p { margin: 0; color: #c0b0e9; font-size: 12px; }
        .copyright-text { color: #c0b0e9; margin: 0; }
        .footer-logo-info .lock-icon { height: 25px !important; width: 25px !important; padding-top: 0 !important; vertical-align: middle; }
        .email-us-button { background: #28a745; border: none; color: white; padding: 10px 20px; border-radius: 5px; font-weight: 500; cursor: pointer; transition: background 0.2s; text-transform: uppercase; font-size: 13px; }
        .email-us-button:hover { background: #218838; }
    </style>
</head>
<body>
    <header>
   <img src="anonymous.png" alt="Lock Icon" class="lock-icon"> <h1>Passwordo</h1>
        <div class="menu-icon" onclick="openNav()">
            <i class="fas fa-bars"></i>
        </div>
    </header>

    <div id="sideNav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="#" onclick="showLogin(); closeNav();">Login/Signup</a>
        <a href="#" onclick="showCart(); closeNav();">Cart (<span id="cartCount">3</span>)</a>
        <a href="#" onclick="showProfile(); closeNav();">Profile</a>
        <a href="#" onclick="showAdmin(); closeNav();">Admin</a>
    </div>

    <div class="search-bar" style="max-width: 1200px; margin: 20px auto; padding: 0 20px;">
        <input type="text" id="search" placeholder="Search products..." onkeyup="filterProducts()">
        <select id="categoryFilter" onchange="filterProducts()">
            <option value="">All Categories</option>
            <option value="Electronics">Electronics</option>
            <option value="Security">Security</option>
            <option value="Accessories">Accessories</option>
        </select>
    </div>

    <h2 class="section-header">Our Products</h2>
    <div class="products" id="productsContainer">
        </div>

    <h2 class="section-header">Customer Feedback</h2>
    <div class="feedback-wrapper">
        <div class="feedback-container">
            <div class="feedback-list" id="feedbackList">
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"The VPN is lightning fast!"</h4>
                    <p>"I was skeptical, but the VPN service works flawlessly. Streaming is smooth, and my privacy score is way up. Excellent value for money."</p>
                    <p style="font-style: italic;">- Alex T.</p>
                </div>
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"Great product selection."</h4>
                    <p>"The smart lock integrated easily with my home system. Had a minor issue with the app, but support was quick to respond."</p>
                    <p style="font-style: italic;">- Sarah M.</p>
                </div>
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"Best password manager I've ever used."</h4>
                    <p>"The secure manager is intuitive and the generated passwords are rock solid. A must-have for anyone serious about digital security."</p>
                    <p style="font-style: italic;">- John B.</p>
                </div>
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"Fast shipping and good quality."</h4>
                    <p>"The anti-theft backpack arrived quickly. It's durable and the hidden zippers provide peace of mind during my commute."</p>
                    <p style="font-style: italic;">- Kelly C.</p>
                </div>
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"Love the biometric keyboard."</h4>
                    <p>"The fingerprint login is seamless on the biometric keyboard. A small investment for a big jump in desktop security."</p>
                    <p style="font-style: italic;">- David L.</p>
                </div>
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"A few more colors, please!"</h4>
                    <p>"The encrypted USB drive is fantastic, but I wish there were more color options. Functionality wise, it's perfect for sensitive files."</p>
                    <p style="font-style: italic;">- Maria P.</p>
                </div>
                <div class="feedback-card">
                    <div class="rating">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <h4>"Five stars for customer support."</h4>
                    <p>"The team resolved my issue with the two-factor authenticator setup almost instantly. Highly professional service!"</p>
                    <p style="font-style: italic;">- Ethan R.</p>
                </div>
            </div>
        </div>
        <button class="slider-arrow" id="arrowLeft" onclick="scrollFeedback(-1)">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="slider-arrow" id="arrowRight" onclick="scrollFeedback(1)">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    
    <h2 class="section-header">Our Trusted Partners</h2>
    <div class="partners-container">
        <div class="partners-list-track">
            <div class="partner-logo">eBay</div>
            <div class="partner-logo">Walmart</div>
            <div class="partner-logo">Amazon</div>
            <div class="partner-logo">Alibaba</div>
            <div class="partner-logo">Etsy</div>
            <div class="partner-logo">Mercado Libre</div>
            <div class="partner-logo">Shopify</div>
            <div class="partner-logo">Rakuten</div>
            <div class="partner-logo">Target</div>
            <div class="partner-logo">eBay</div>
            <div class="partner-logo">Walmart</div>
            <div class="partner-logo">Amazon</div>
            <div class="partner-logo">Alibaba</div>
            <div class="partner-logo">Etsy</div>
            <div class="partner-logo">Mercado Libre</div>
            <div class="partner-logo">Shopify</div>
            <div class="partner-logo">Rakuten</div>
            <div class="partner-logo">Target</div>
        </div>
    </div>

    <div class="cart" id="cart">
        <h3>Your Cart</h3>
        <div id="cartItems">Cart is empty.</div>
        <p id="cartTotal">Total: $0.00</p>
        <button onclick="checkout()">Checkout with Stripe (API)</button>
    </div>

    <div id="paymentMethodPopup" class="popup-base">
        <h3>Item Added to Cart!</h3>
        <p>Would you like to explore alternative payment methods now, or continue shopping?</p>
        <div class="payment-options">
            <button onclick="showBinanceCryptoPopup()">
                <i class="fas fa-money-check-alt"></i> Pay with **Binance**
            </button>
            <button onclick="showTrustWalletCryptoPopup()">
                <i class="fas fa-wallet"></i> Pay with **Trust Wallet**
            </button>
            <button onclick="alert('Proceeding with PayPal Payment (Simulated)'); closePaymentPopup();">
                <i class="fab fa-paypal"></i> Pay with PayPal
            </button>
        </div>
        <button class="close-popup" onclick="closePaymentPopup()">Continue Shopping</button>
    </div>
    <div id="binanceCryptoPopup" class="popup-base">
        <h3>Binance: Select Cryptocurrency</h3>
        <p>Choose your preferred coin to complete the payment:</p>
        <div class="crypto-options">
            <button onclick="processBinancePayment('Bitcoin')"><i class="fab fa-btc"></i> Bitcoin (BTC)</button>
            <button onclick="processBinancePayment('USDT')"><i class="fas fa-dollar-sign"></i> Tether (USDT)</button>
            <button onclick="processBinancePayment('USDC')"><i class="fas fa-dollar-sign"></i> USD Coin (USDC)</button>
            <button onclick="processBinancePayment('PEPE')">üê∏ Pepe (PEPE)</button>
            <button onclick="processBinancePayment('Solana')"><i class="fas fa-sun"></i> Solana (SOL)</button>
        </div>
        <button onclick="closeBinanceCryptoPopup()">Back to Payment Options</button>
    </div>
    <div id="trustWalletCryptoPopup" class="popup-base">
        <h3>Trust Wallet: Select Cryptocurrency</h3>
        <p>Choose your preferred coin to complete the payment:</p>
        <div class="crypto-options">
            <button onclick="processTrustWalletPayment('Bitcoin')"><i class="fab fa-btc"></i> Bitcoin (BTC)</button>
            <button onclick="processTrustWalletPayment('USDT')"><i class="fas fa-dollar-sign"></i> Tether (USDT)</button>
            <button onclick="processTrustWalletPayment('USDC')"><i class="fas fa-dollar-sign"></i> USD Coin (USDC)</button>
            <button onclick="processTrustWalletPayment('PEPE')">üê∏ Pepe (PEPE)</button>
            <button onclick="processTrustWalletPayment('Solana')"><i class="fas fa-sun"></i> Solana (SOL)</button>
        </div>
        <button onclick="closeTrustWalletCryptoPopup()">Back to Payment Options</button>
    </div>

    <div class="login" id="login">
        <h2>Login/Signup (API)</h2>
        <input type="email" placeholder="Email" id="email">
        <input type="password" placeholder="Password" id="password">
        <input type="text" placeholder="Display Name (for Signup)" id="displayName" style="display: none;">
        <div id="loginError" class="error"></div>
        <button id="loginSignupBtn" onclick="handleLoginSignup()">Login</button>
        <button onclick="toggleSignup()">Signup Mode</button>
        <button onclick="closeLogin()">Close</button>
        <p><a href="#" onclick="showForgot()">Forgot Password?</a></p>
    </div>

    <div class="forgot" id="forgot">
        <h2>Forgot Password (API)</h2>
        <p>Requires server-side implementation for token generation and email.</p>
        <input type="email" placeholder="Enter your email" id="resetEmail">
        <input type="text" placeholder="Reset Token (from email)" id="resetToken" style="display: none;">
        <input type="password" placeholder="New Password" id="newPassword" style="display: none;">
        <div id="forgotError" class="error"></div>
        <button onclick="alert('API: Sending reset link to server...');">Send Reset Link</button> 
        <button onclick="alert('API: Sending token and new password to server...');" id="resetBtn" style="display: none;">Reset Password</button>
        <button onclick="closeForgot()">Close</button>
    </div>

    <div class="profile" id="profile">
        <h2>Your Profile</h2>
        <p id="profileInfo">Not logged in.</p>
        <input type="text" placeholder="Update Display Name (API)" id="updateName">
        <button onclick="alert('API: Sending name update to server...');">Update</button>
        <button onclick="logout()">Logout (API)</button>
        <button onclick="closeProfile()">Close</button>
    </div>

    <div class="admin" id="admin">
        <h2>Add New Product (Admin API)</h2>
        <input type="text" placeholder="Product Name" id="adminName">
        <input type="number" step="0.01" placeholder="Price" id="adminPrice">
        <select id="adminCategory">
            <option value="Electronics">Electronics</option>
            <option value="Security">Security</option>
            <option value="Accessories">Accessories</option>
        </select>
        <input type="url" placeholder="Image URL" id="adminImg">
        <textarea placeholder="Description" id="adminDesc" rows="3"></textarea>
        <div id="adminError" class="error"></div>
        <button onclick="addProduct()">Add Product (API)</button>
        <button onclick="closeAdmin()">Close</button>
    </div>
    
    <div id="popupBackdrop" onclick="closeAllPopups()"></div>

    <footer class="custom-website-footer">
        <div class="footer-links-container">
            <div class="footer-section">
                <h3>ABOUT US</h3>
                <ul>
                    <li><a href="#">PRESS ROOM</a></li>
                    <li><a href="#">Testimonials</a></li>
                    <li><a href="#">Careers</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>CUSTOMERS</h3>
                <ul>
                    <li><a href="#">Return Policy</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                    <li><a href="#">Terms and Conditions</a></li>
                    <li><a href="#">Tech Support</a></li>
                    <li><a href="#">Documentation</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>OTHER SERVICES</h3>
                <ul>
                    <li><a href="#">Affiliate Program</a></li>
                    <li><a href="#">Security Blog</a></li>
                </ul>
            </div>
            <div class="footer-section social-links-section">
                <h3>FOLLOW US ON</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-pinterest-p"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom-bar">
            <div class="footer-logo-info">
                <h1 style="color: white; font-size: 20px;"><img src="anonymous.png" alt="Lock Icon" class="lock-icon"> Passwordo</h1>
                <p>A **SecureTech** company</p>
            </div>
            <p class="copyright-text">
                &copy; 2018-2025 Passwordo. All Rights Reserved.
            </p>
            <button class="email-us-button" onclick="window.location.href='mailto:support@passwordo.com'">Email Us</button>
        </div>
    </footer>
    
    <script>
        // --- Feedback Slider Logic (Unchanged) ---
        let currentSlide = 0;
        const totalSlides = 7;
        const scrollStep = 990; 
        const maxScrolls = 4; 

        function scrollFeedback(direction) {
            const list = document.getElementById('feedbackList');
            currentSlide += direction;

            if (currentSlide < 0) {
                currentSlide = 0;
            } else if (currentSlide > maxScrolls) {
                currentSlide = maxScrolls;
            }

            list.style.transform = `translateX(-${currentSlide * scrollStep}px)`;

            document.getElementById('arrowLeft').style.opacity = currentSlide === 0 ? '0.5' : '1';
            document.getElementById('arrowRight').style.opacity = currentSlide === maxScrolls ? '0.5' : '1';
        }

        // --- NEW: Side Nav Menu Functions ---
        function openNav() {
            document.getElementById("sideNav").style.width = "250px";
            document.getElementById("popupBackdrop").style.display = "block"; // Use backdrop for cover
        }

        function closeNav() {
            document.getElementById("sideNav").style.width = "0";
            document.getElementById("popupBackdrop").style.display = "none";
        }

        // --- Configuration and State ---
        const stripe = Stripe('pk_test_your_stripe_publishable_key_here'); 
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        let currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        
        let products = [
            { id: 1, name: 'Secure Password Manager', price: 29.99, category: 'Security', img: 'https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=400', desc: 'Store and generate strong passwords securely.' },
            { id: 2, name: 'Wireless Earbuds', price: 49.99, category: 'Electronics', img: 'https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=400', desc: 'High-quality sound with noise cancellation.' },
            { id: 4, name: 'Laptop Stand', price: 39.99, category: 'Accessories', img: 'https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400', desc: 'Ergonomic stand for better posture.' },
            { id: 5, name: 'VPN Service Subscription', price: 9.99, category: 'Security', img: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?w=400', desc: 'Protect your online privacy.' },
            { id: 6, name: 'Bluetooth Speaker', price: 59.99, category: 'Electronics', img: 'https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=400', desc: 'Portable speaker with deep bass.' },
            { id: 7, name: 'Anti-Theft Backpack', price: 69.99, category: 'Accessories', img: 'https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=400', desc: 'Secure your valuables on the go.' },
            { id: 8, name: 'Fingerprint Scanner', price: 19.99, category: 'Security', img: 'https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=400', desc: 'Biometric access control.' },
            { id: 9, name: 'Gaming Mouse', price: 34.99, category: 'Electronics', img: 'https://images.unsplash.com/photo-1527814050087-3793815479db?w=400', desc: 'Precision mouse for gamers.' },
            { id: 10, name: 'Cable Organizer', price: 14.99, category: 'Accessories', img: 'https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=400', desc: 'Keep your desk tidy.' },
            { id: 11, name: 'Encrypted USB Drive', price: 24.99, category: 'Security', img: 'https://images.unsplash.com/photo-1625842268584-8f3296236761?w=400', desc: 'Secure data storage.' },
            { id: 12, name: 'Wireless Charger', price: 19.99, category: 'Electronics', img: 'https://images.unsplash.com/photo-1586953208448-b95a79798f07?w=400', desc: 'Fast charging for devices.' },
            { id: 13, name: 'Biometric Keyboard', price: 89.99, category: 'Security', img: 'https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=400', desc: 'Keyboard with built-in fingerprint reader.' },
            { id: 14, name: 'Surveillance Camera', price: 119.99, category: 'Security', img: 'https://images.unsplash.com/photo-1557804506-669a67965ba0?w=400', desc: 'HD camera for home security monitoring.' },
            { id: 15, name: 'Portable Hard Drive', price: 54.99, category: 'Electronics', img: 'https://images.unsplash.com/photo-1606230960216-e18be2a5622e?w=400', desc: '1TB external storage for backups.' },
            { id: 17, name: 'Two-Factor Authenticator', price: 15.99, category: 'Security', img: 'https://images.unsplash.com/photo-1563013544-824ae1b704d3?w=400', desc: 'Hardware token for secure logins.' },
            { id: 18, name: 'Smartphone Stand', price: 22.99, category: 'Accessories', img: 'https://images.unsplash.com/photo-1589492477829-5e65395b66cc?w=400', desc: 'Adjustable stand for hands-free viewing.' },
            // NEW PRODUCT ADDED HERE:
            { id: 19, name: 'Smart Home Security Hub', price: 199.99, category: 'Security', img: 'https://images.unsplash.com/photo-1563770425983-3663a8a9a2c3?w=400', desc: 'Central command for all your smart security devices.' }
        ];

        // --- Core UI Functions ---

        function renderProducts(filtered = products) {
            const container = document.getElementById('productsContainer');
            container.innerHTML = filtered.map(p => `
                <div class="product">
                    <img src="${p.img}" alt="${p.name}">
                    <h3>${p.name}</h3>
                    <p>${p.desc}</p>
                    <p>$${p.price.toFixed(2)}</p>
                    <button onclick="addToCart(${p.id})">Add to Cart</button>
                </div>
            `).join('');
        }

        function filterProducts() {
            const search = document.getElementById('search').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const filtered = products.filter(p => 
                p.name.toLowerCase().includes(search) && (!category || p.category === category)
            );
            renderProducts(filtered);
        }

        function updateCart() {
            const itemsContainer = document.getElementById('cartItems');
            const totalDisplay = document.getElementById('cartTotal');
            const cartCount = document.getElementById('cartCount'); // Update header count
            const sideNavCartCount = document.querySelector('#sideNav a[onclick*="showCart"] span'); // Update side nav count

            if (cart.length === 0) {
                itemsContainer.innerHTML = 'Cart is empty.';
                totalDisplay.innerText = 'Total: $0.00';
                cartCount.innerText = 0;
                if(sideNavCartCount) sideNavCartCount.innerText = 0;
                return;
            }

            let total = 0;
            itemsContainer.innerHTML = cart.map((item, index) => {
                total += item.price * item.quantity;
                return `
                    <div class="cart-item">
                        <span>${item.name} x ${item.quantity}</span>
                        <span>$${(item.price * item.quantity).toFixed(2)}</span>
                        <button onclick="removeFromCart(${index})">Remove</button>
                    </div>
                `;
            }).join('');
            
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            totalDisplay.innerText = `Total: $${total.toFixed(2)}`;
            cartCount.innerText = count;
            if(sideNavCartCount) sideNavCartCount.innerText = count;
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            updateCart();
            showPaymentPopup(); 
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCart();
        }
        
        // --- Popups and Backdrop (Function completed) ---
        function closeAllPopups() {
            document.getElementById('login').style.display = 'none';
            document.getElementById('forgot').style.display = 'none';
            document.getElementById('profile').style.display = 'none';
            document.getElementById('admin').style.display = 'none';
            document.getElementById('cart').style.display = 'none';
            document.getElementById('paymentMethodPopup').style.display = 'none';
            document.getElementById('binanceCryptoPopup').style.display = 'none';
            document.getElementById('trustWalletCryptoPopup').style.display = 'none';
            
            document.getElementById('popupBackdrop').style.display = 'none';
            closeNav(); // Ensure the side nav is also closed
        }

        // --- View Control Functions (Unchanged) ---
        function showCart() { 
            closeAllPopups(); 
            document.getElementById('cart').style.display = 'block'; 
            document.getElementById('popupBackdrop').style.display = 'block';
            updateCart(); 
        }

        function showLogin() { 
            closeAllPopups(); 
            document.getElementById('login').style.display = 'block'; 
            document.getElementById('popupBackdrop').style.display = 'block';
            document.getElementById('displayName').style.display = 'none'; 
            document.getElementById('loginSignupBtn').innerText = 'Login';
        }
        function closeLogin() { closeAllPopups(); } 

        function showForgot() { 
            closeAllPopups(); 
            document.getElementById('forgot').style.display = 'block'; 
            document.getElementById('popupBackdrop').style.display = 'block';
        }
        function closeForgot() { closeAllPopups(); } 

        function showProfile() { 
            if (!currentUser) { alert('Please log in first.'); return; }
            closeAllPopups(); 
            document.getElementById('profile').style.display = 'block'; 
            document.getElementById('popupBackdrop').style.display = 'block';
            document.getElementById('profileInfo').innerText = `Name: ${currentUser.displayName}, Email: ${currentUser.email}`;
        }
        function closeProfile() { closeAllPopups(); } 

        function showAdmin() {
            if (!currentUser || !currentUser.isAdmin) {
                alert('You must be logged in as an authorized admin.');
                return;
            }
            closeAllPopups(); 
            document.getElementById('admin').style.display = 'block';
            document.getElementById('popupBackdrop').style.display = 'block';
        }
        function closeAdmin() { closeAllPopups(); } 


        // --- Payment Popup Functions (Unchanged) ---

        function showPaymentPopup() {
            document.getElementById('paymentMethodPopup').style.display = 'block';
            document.getElementById('popupBackdrop').style.display = 'block'; 
            document.getElementById('binanceCryptoPopup').style.display = 'none';
            document.getElementById('trustWalletCryptoPopup').style.display = 'none';
        }

        function closePaymentPopup() {
            document.getElementById('paymentMethodPopup').style.display = 'none';
            document.getElementById('popupBackdrop').style.display = 'none'; 
        }
        
        function showBinanceCryptoPopup() { 
            document.getElementById('paymentMethodPopup').style.display = 'none'; 
            document.getElementById('binanceCryptoPopup').style.display = 'block'; 
        }
        function closeBinanceCryptoPopup() { 
            document.getElementById('binanceCryptoPopup').style.display = 'none'; 
            showPaymentPopup(); 
        }
        function processBinancePayment(currency) {
            const total = document.getElementById('cartTotal').innerText;
            alert(`Proceeding with Binance Payment using ${currency}. Total: ${total}. \n(Simulated: Payment initiated. Cart cleared.)`);
            closeAllPopups(); 
            cart = [];
            localStorage.removeItem('cart');
            updateCart();
        }
        
        function showTrustWalletCryptoPopup() { 
            document.getElementById('paymentMethodPopup').style.display = 'none'; 
            document.getElementById('trustWalletCryptoPopup').style.display = 'block'; 
        }
        function closeTrustWalletCryptoPopup() { 
            document.getElementById('trustWalletCryptoPopup').style.display = 'none'; 
            showPaymentPopup(); 
        }
        function processTrustWalletPayment(currency) {
            const total = document.getElementById('cartTotal').innerText;
            alert(`Proceeding with Trust Wallet Payment using ${currency}. Total: ${total}. \n(Simulated: Payment initiated. Cart cleared.)`);
            closeAllPopups(); 
            cart = [];
            localStorage.removeItem('cart');
            updateCart();
        }

        // --- SECURE API INTEGRATION FUNCTIONS (Conceptual) ---

        // Login, Signup, Logout, AddProduct, Checkout functions (Omitted for brevity, retained logic)
        async function login() {
            const email = document.getElementById('email').value;
            alert('API: Login attempt simulated.');
            // Simulating admin login if email contains 'admin'
            currentUser = { email: email, displayName: email.split('@')[0], isAdmin: email.includes('admin') };
            localStorage.setItem('currentUser', JSON.stringify(currentUser)); 
            closeLogin();
            updateNav();
        }
        async function signup() {
            alert('API: Signup successful! Proceeding to login with API. (Conceptual)');
            handleLoginSignup(); 
        }
        function handleLoginSignup() {
            if (document.getElementById('displayName').style.display === 'block') { signup(); } else { login(); }
        }
        function toggleSignup() {
            const nameField = document.getElementById('displayName');
            const button = document.getElementById('loginSignupBtn');
            const isSignupMode = nameField.style.display === 'block';
            nameField.style.display = isSignupMode ? 'none' : 'block';
            button.innerText = isSignupMode ? 'Login' : 'Sign Up';
        }
        async function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            alert('Logged out successfully.');
            closeProfile();
            updateNav();
        }
        async function addProduct() {
            alert('Product added successfully! (Conceptual API interaction)');
            closeAdmin();
        }
        async function checkout() {
            if (cart.length === 0) { alert("Your cart is empty!"); return; }
            alert('API: Redirecting to Stripe checkout (Simulated). Cart cleared.');
            cart = [];
            localStorage.removeItem('cart');
            updateCart();
        }
        
        // --- Initialization ---
        function updateNav() {
            // Placeholder for future navigation updates based on login status
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            // Manually set initial cart count to 3 for the side nav and header based on the user request, 
            // even though the logical 'cart' array might be empty on a fresh load.
            document.getElementById('cartCount').innerText = 3; 
            const sideNavCartCount = document.querySelector('#sideNav a[onclick*="showCart"] span');
            if(sideNavCartCount) sideNavCartCount.innerText = 3;
            
            scrollFeedback(0); 
        });
    </script>
</body>
</html>
